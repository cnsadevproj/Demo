# 🎮 API 활용 학습루틴 게임화 시스템

랜덤 팀 기반의 주간 미션 게임과 개인의 장기 꾸준함 시각화(잔디)를 결합한 교육용 게임화 시스템입니다.

## 📋 시스템 개요

- **랜덤 팀 기반 주간 미션**: 매주 새로운 팀 구성으로 다양한 관계 형성
- **개인 꾸준함 시각화**: GitHub 스타일의 잔디로 학기 전체 학습 기록 추적
- **공정성 보장**: 팀 규모 차이를 평균 라운드 쿠키로 보정
- **부담 없는 게임화**: 보상/패널티 없이 자연스러운 학습 동기 부여

## 🗓️ 주간 루프

### 월요일
- 팀 랜덤 배정 (선생님이 팀 규모 지정 → 자동 배정)
- 월요일 스냅샷(B_mon) 기록
- 이번주 공통 개인 미션 공지

### 수요일
- 수요일 스냅샷(B_wed) → 라운드 쿠키 확정
- 공격/방어 입력 및 팀 미션 배정

### 목·금
- 팀 미션 또는 개인 미션 수행
- 잔디 심기 (개인 꾸준함 기록)

### 다음 주 월요일
- 이번주 결과 리포트
- 새로운 팀 배정 및 루프 시작

## 📱 페이지 구성

### 🟩 학생용 페이지 (6개)

1. **대시보드** (`/dashboard`) - 학생 홈 화면
   - 이번주 팀 정보
   - earned_round (획득한 라운드 쿠키)
   - 오늘의 미션 상태
   - 미니 잔디

2. **팀 현황** (`/team`) - 주간 팀 현황
   - 전체 팀 목록
   - 팀별 earned_round
   - 공격/방어 결과
   - 팀 미션 받은 팀 표시

3. **공격/방어** (`/battle`) - 수요일 전투
   - 공격할 팀 선택
   - 쿠키 베팅 (공격/방어)
   - 제출 버튼

4. **미션 수행** (`/mission`) - 목·금 미션
   - 20분 타이머
   - 체크 인증 / 사진 인증
   - 오늘 잔디 1칸 반영

5. **학습 잔디** (`/grass`) - 학기 꾸준함
   - GitHub 스타일 잔디
   - 클릭 시 상세 인증 기록
   - 통계 (완료율, 최고 연속일 등)

6. **랭킹** (`/ranking`) - 학기 성실도 TOP
   - 상위 3명만 공개
   - 본인 순위 표시
   - 개인 상세 기록

### 🟥 관리자용 페이지 (4개)

7. **관리자 홈** (`/admin`) - 관리자 대시보드
   - 이번주 요약
   - 빠른 작업 버튼
   - 데이터 요약

8. **팀 배정** (`/team-assign`) - 팀 배정
   - 팀 개수/규모 입력
   - 랜덤 배정 실행
   - 결과 미리보기 및 저장

9. **스냅샷 관리** (`/snapshot`) - 쿠키 스냅샷
   - B_mon 실행 (월요일)
   - B_wed 실행 (수요일)
   - earned_round 자동 계산 보기
   - 팀별 평균 라운드 쿠키

10. **주간 리포트** (`/report`) - 결과 분석
    - 팀 미션 성공/실패
    - 개인 미션 참여율
    - 쿠키 변화 그래프
    - 잔디 변화 통계
    - Sheets 데이터 다운로드

### 🟦 데모 페이지 (4개)

11. **데모: 학생** (`/demo`) - 학생 대시보드 데모
12. **데모: 팀** (`/demo-team`) - 팀 현황 데모
13. **데모: 관리자** (`/demo-admin`) - 관리자 홈 데모
14. **데모: 리포트** (`/demo-report`) - 리포트 데모

### 🟧 유틸리티 (2개)

15. **에러 페이지** (`/error`) - 권한 없음 안내
16. **로딩** (`/loading`) - API 호출 대기 화면

## 🎯 주요 기능

### 라운드 쿠키 시스템
```
earned_round = max(0, B_wed - B_mon)
```
- 월요일과 수요일 사이에 획득한 쿠키
- 팀 평균으로 공정성 보정
- 공격/방어에 사용하는 자원

### 공격/방어 메커니즘
- 각 팀은 다른 팀을 공격하고 방어 포인트 설정
- 공격이 성공하면 상대 팀이 팀 미션 수행
- 팀 미션은 보상 없음 (공정성 유지)

### 잔디 시스템
- 학기 전체 기간의 개인 학습 기록
- 팀 운과 무관한 개인 성장 추적
- 완료: 초록색 / 미완료: 회색
- 팀 미션: 진한 초록 / 개인 미션: 밝은 초록

## 🛠️ 기술 스택

- **React** - UI 프레임워크
- **TypeScript** - 타입 안정성
- **Tailwind CSS** - 스타일링
- **Lucide React** - 아이콘
- **Recharts** - 차트/그래프 (필요시)
- **Sonner** - 토스트 알림

## 🚀 실제 배포 시 고려사항

### Google Apps Script 연동
```javascript
// 실제 구현 시 필요한 API 호출 예시

// 1. 쿠키 잔액 조회
function getCookieBalance(userId) {
  // ClassDojo/Class123 API 호출
  return balance;
}

// 2. 스냅샷 저장
function saveSnapshot(weekId, snapshots) {
  // Google Sheets에 저장
}

// 3. 팀 배정 저장
function saveTeamAssignment(weekId, teams) {
  // Google Sheets에 저장
}

// 4. 미션 완료 기록
function recordMissionCompletion(userId, date, missionType) {
  // Google Sheets에 저장
}
```

### 데이터 구조 (Google Sheets)

**Snapshots 시트**
| userID | weekID | teamID | B_mon | B_wed | earned_round |
|--------|--------|--------|-------|-------|--------------|

**Teams 시트**
| weekID | teamID | teamName | teamFlag | members |
|--------|--------|----------|----------|---------|

**Battles 시트**
| weekID | teamID | targetTeam | attackBet | defenseBet | missionID |
|--------|--------|------------|-----------|------------|-----------|

**Grass 시트**
| userID | date | completed | missionType |
|--------|------|-----------|-------------|

**Missions 시트**
| missionID | type | title | description | targetValue |
|-----------|------|-------|-------------|-------------|

## 🎓 교육적 효과

### 공정성
- 팀 크기 차이를 평균으로 보정
- 매주 랜덤 팀 구성으로 편파 없음
- 개인 미션은 팀 운과 무관

### 재미 요소
- 매주 수요일 공격/방어 심리전
- 랜덤 팀으로 새로운 조합
- 잔디 시각화로 성취감

### 꾸준함 유도
- 학기 전체 잔디 UI
- 개인 미션 최소 난이도
- 연속일 기록으로 동기부여

### 부담 없음
- 보상/패널티 없음
- 실패해도 괜찮음
- 잔디는 기록일 뿐 압박 아님

## 📝 사용 방법

### 학생
1. 학교 이메일로 로그인
2. 대시보드에서 이번주 팀 확인
3. 수요일에 공격/방어 설정
4. 목·금에 미션 수행하고 잔디 심기
5. 잔디와 랭킹으로 성장 확인

### 관리자 (교사)
1. 월요일: 팀 배정 + B_mon 스냅샷
2. 수요일: B_wed 스냅샷 + 학생 공격/방어 모니터링
3. 다음 월요일: 주간 리포트 확인
4. 필요시 미션 조정 및 데이터 다운로드

## 🔒 보안 및 개인정보

- 학교 이메일(@school.ac.kr) 인증 필요
- PII(개인식별정보) 수집 최소화
- 학생 간 경쟁보다 개인 성장 강조
- 전체 랭킹 비공개 (TOP 3만 공개)

## 📄 라이선스

교육용 프로젝트입니다.

---

**제작**: Figma Make AI
**날짜**: 2024년 11월
